<!DOCTYPE html>
<html lang="en-US" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- ===============================================-->
  <!--    Document Title-->
  <!-- ===============================================-->
  <title>OnlineKart</title>

  <!-- ===============================================-->
  <!--    Favicons-->
  <!-- ===============================================-->
  <link rel="apple-touch-icon" sizes="180x180" href="../../../assets/img/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../../assets/img/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../../assets/img/favicons/favicon-16x16.png">
  <link rel="shortcut icon" type="image/x-icon" href="../../../assets/img/favicons/favicon.ico">
  <link rel="manifest" href="../../../assets/img/favicons/manifest.json">
  <meta name="msapplication-TileImage" content="../../../assets/img/favicons/mstile-150x150.png">
  <meta name="theme-color" content="#ffffff">
  <script src="../../../vendors/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="../../../vendors/simplebar/simplebar.min.js"></script>
  <script src="../../../assets/js/config.js"></script>

  <!-- ===============================================-->
  <!--    Stylesheets-->
  <!-- ===============================================-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&amp;display=swap"
    rel="stylesheet">
  <link href="../../../vendors/simplebar/simplebar.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
  <link href="../../../assets/css/theme-rtl.min.css" type="text/css" rel="stylesheet" id="style-rtl">
  <link href="../../../assets/css/theme.min.css" type="text/css" rel="stylesheet" id="style-default">
  <link href="../../../assets/css/user-rtl.min.css" type="text/css" rel="stylesheet" id="user-style-rtl">
  <link href="../../../assets/css/user.min.css" type="text/css" rel="stylesheet" id="user-style-default">
  <script>
    var phoenixIsRTL = window.config.config.phoenixIsRTL;
    if (phoenixIsRTL) {
      var linkDefault = document.getElementById('style-default');
      var userLinkDefault = document.getElementById('user-style-default');
      linkDefault.setAttribute('disabled', true);
      userLinkDefault.setAttribute('disabled', true);
      document.querySelector('html').setAttribute('dir', 'rtl');
    } else {
      var linkRTL = document.getElementById('style-rtl');
      var userLinkRTL = document.getElementById('user-style-rtl');
      linkRTL.setAttribute('disabled', true);
      userLinkRTL.setAttribute('disabled', true);
    }
  </script>
</head>

<body>
  <!-- ===============================================-->
  <!--    Main Content-->
  <!-- ===============================================-->
  <main class="main" id="top">
    <div class="container">
      <div class="row flex-center min-vh-100 py-5">
        <div class="col-sm-10 col-md-8 col-lg-5 col-xxl-4"><a class="d-flex flex-center text-decoration-none mb-4"
            href="../../../index.html">
            <div class="d-flex align-items-center fw-bolder fs-5 d-inline-block"><img
                src="../../../assets/img/icons/logo.png" alt="phoenix" width="58" /></div>
          </a>
          <div class="px-xxl-5">
            <div class="text-center mb-6">
              <h4 class="text-1000">Enter the verification code</h4>
              <p class="text-700 mb-0">An message containing a 4-digit verification code has been sent to your mobile
                number. </p>
              <!-- <P class="fs--2 mb-5">Donâ€™t have access? <a href="#!">Use another method</a></P> -->
              <!-- <div class="px-xxl-5">
                <div class="text-center mb-6">


                  <br>


                  <form class="d-flex align-items-center mb-5" id="otpForm" action="/otpPage" method="post">
                    <input id="oldotp" type="hidden" name="sendotp" value="<%-otp%>"> -->

                    <!-- <input class="form-control flex-1" id="otpInput" name="otp" type="number" placeholder="Enter your OTP" /> -->
                    <!-- <input type="number" class="form-control" id="otpInput" name="otp" required>
                    <button class="btn btn-primary ms-2" type="submit">Send<span class="fas fa-chevron-right ms-2"></span></button>
                  </form>
                  <input type="hidden" name="mobilenumber" value="<%-mobno%>">
                  <a class="fs--1 fw-bold" id="resendBtn" onclick="startTimer(60);">Resend OTP!</a>
                  <span class="form-text text-muted" id="timer"></span>
                  

                  


                </div>
              </div> -->


              <div class="container my-5">
                <div class="row justify-content-center">
                  <div class="col-md-6">
                    <div class="card">
                      <div class="card-header text-center">
                        <h1 class="fw-bold mb-0"><span class="text-info">OTP</span> Verification</h1>
                      </div>
                      <div class="card-body">
                        <form id="otpForm" action="/otpPage" method="post">
                          <input id="oldotp" type="hidden" name="sendotp" value="<%-otp%>">
                          <div class="mb-3">
                            <label for="otpInput" class="form-label">OTP</label>
                            <div class="input-group">
                              <span class="input-group-text"><i class="fas fa-key"></i></span>
                              <input type="number" class="form-control" id="otpInput" name="otp" required>
                              <span id="timer" style="display: none;"></span>
                              <input type="hidden" name="mobilenumber" value="<%-mobno%>">
                              <button type="button" class="btn btn-dark ms-2" id="resendBtn"
                                onclick="startTimer(60);">Resend</button>
                            </div>
                            <span class="form-text text-muted" id="timer"></span>
                          </div>
                          <div class="d-grid">
                            <button type="submit" class="btn btn-warning">Register</button>
                          </div>
                        </form>
                      </div>
            
                    </div>
                  </div>
                </div>
              </div>






            </div>
          </div>
        </div>
      </div>
    </div>

  </main><!-- ===============================================-->
  <!--    End of Main Content-->
  <!-- ===============================================-->


  <script>
    var timerInterval;
    var timeout;

    (function () {
      var timer = document.getElementById("timer");
      var button = document.getElementById("resendBtn");
      timer.style.display = "inline-block";
      button.style.display = "none";
      var seconds = 60;
      timer.innerHTML = seconds + " seconds remaining";
      timerInterval = setInterval(function () {
        seconds--;
        if (seconds <= 0) {
          clearInterval(timerInterval);
          timer.style.display = "none";
          button.style.display = "inline-block";
          timeout = setTimeout(function () {
            button.style.display = "none";
          }, 10000);
        } else {
          timer.innerHTML = seconds + " seconds remaining";
        }
      }, 1000);
    })()

    function startTimer(duration) {
      console.log('<%=mobno%>');

      $.ajax({
        url: '/againotp',
        type: 'POST',
        data: { phonenumber: '<%=mobno%>' },
        success: function (data) {
          document.getElementById("oldotp").value = data.newOtp;
        },
        error: function (jqXHR, textStatus, errorThrown) {
          console.log(textStatus, errorThrown);
        }
      })
      var timer = document.getElementById("timer");
      var button = document.getElementById("resendBtn");
      timer.style.display = "inline-block";
      button.style.display = "none";
      var seconds = duration;
      timer.innerHTML = seconds + " seconds remaining";
      timerInterval = setInterval(function () {
        seconds--;
        if (seconds <= 0) {
          clearInterval(timerInterval);
          timer.style.display = "none";
          button.style.display = "inline-block";
        } else {
          timer.innerHTML = seconds + " seconds remaining";
        }
      }, 1000);
    }

    function stopTimer() {
      clearInterval(timerInterval);
      clearTimeout(timeout);
      var timer = document.getElementById("timer");
      var button = document.getElementById("resendBtn");
      timer.style.display = "none";
      button.style.display = "inline-block";
    }
  </script>


  <span id="timer" style="display: none;"></span>
  <button type="button" class="btn btn-info ms-2" id="resendBtn" style="display: none;"
    onclick="startTimer(60);">Resend</button>






  <!-- ===============================================-->
  <!--    JavaScripts-->
  <!-- ===============================================-->
  <script src="../../../vendors/popper/popper.min.js"></script>
  <script src="../../../vendors/bootstrap/bootstrap.min.js"></script>
  <script src="../../../vendors/anchorjs/anchor.min.js"></script>
  <script src="../../../vendors/is/is.min.js"></script>
  <script src="../../../vendors/fontawesome/all.min.js"></script>
  <script src="../../../vendors/lodash/lodash.min.js"></script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
  <script src="../../../vendors/list.js/list.min.js"></script>
  <script src="../../../vendors/feather-icons/feather.min.js"></script>
  <script src="../../../vendors/dayjs/dayjs.min.js"></script>
  <script src="../../../assets/js/phoenix.js"></script>
</body>

</html>